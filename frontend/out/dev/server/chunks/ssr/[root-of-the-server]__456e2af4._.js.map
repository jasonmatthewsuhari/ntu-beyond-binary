{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Jason/Documents/GitHub/ntu-beyond-binary/frontend/lib/fluent-context.tsx"],"sourcesContent":["'use client'\r\n\r\nimport React, { createContext, useContext, useState, useEffect, useCallback } from 'react'\r\n\r\n// ── Types ───────────────────────────────────────────────\r\nexport type ThemeName = 'light' | 'dark' | 'high-contrast' | 'colorblind' | 'calm'\r\n\r\nexport interface AccessibilitySettings {\r\n    theme: ThemeName\r\n    fontSize: number        // 12–32\r\n    fontFamily: 'inter' | 'opendyslexic'\r\n    lineHeight: number      // 1.2–2.5\r\n    letterSpacing: number   // 0–4\r\n    reducedMotion: boolean\r\n    cursorSize: 'normal' | 'large' | 'xlarge'\r\n    dwellTime: number       // ms for eye gaze\r\n    scanSpeed: number       // ms for switch scanning\r\n    tremorFilter: number    // 0–100 strength\r\n    morseThresholds: { dot: number; dash: number; letterGap: number; wordGap: number }\r\n    ttsVoice: string\r\n    ttsSpeed: number\r\n    ttsPitch: number\r\n    sosEnabled: boolean\r\n    sosTrigger: 'blinks' | 'taps' | 'voice'\r\n    sosContacts: string[]\r\n}\r\n\r\nexport interface OutputState {\r\n    text: string\r\n    history: string[]\r\n    historyIndex: number\r\n}\r\n\r\ninterface FluentContextType {\r\n    settings: AccessibilitySettings\r\n    updateSetting: <K extends keyof AccessibilitySettings>(key: K, value: AccessibilitySettings[K]) => void\r\n    resetSettings: () => void\r\n    output: OutputState\r\n    appendOutput: (text: string) => void\r\n    setOutput: (text: string) => void\r\n    clearOutput: () => void\r\n    undoOutput: () => void\r\n    redoOutput: () => void\r\n    speak: (text?: string) => void\r\n    stopSpeaking: () => void\r\n    isSpeaking: boolean\r\n    sidebarOpen: boolean\r\n    setSidebarOpen: (open: boolean) => void\r\n}\r\n\r\n// ── Defaults ────────────────────────────────────────────\r\nconst DEFAULT_SETTINGS: AccessibilitySettings = {\r\n    theme: 'light',\r\n    fontSize: 16,\r\n    fontFamily: 'inter',\r\n    lineHeight: 1.6,\r\n    letterSpacing: 0,\r\n    reducedMotion: false,\r\n    cursorSize: 'normal',\r\n    dwellTime: 1200,\r\n    scanSpeed: 1500,\r\n    tremorFilter: 0,\r\n    morseThresholds: { dot: 200, dash: 400, letterGap: 1000, wordGap: 2000 },\r\n    ttsVoice: '',\r\n    ttsSpeed: 1.0,\r\n    ttsPitch: 1.0,\r\n    sosEnabled: true,\r\n    sosTrigger: 'taps',\r\n    sosContacts: [],\r\n}\r\n\r\nconst DEFAULT_OUTPUT: OutputState = { text: '', history: [''], historyIndex: 0 }\r\n\r\nconst FluentContext = createContext<FluentContextType | null>(null)\r\n\r\nexport function useFluentContext() {\r\n    const ctx = useContext(FluentContext)\r\n    if (!ctx) throw new Error('useFluentContext must be inside FluentProvider')\r\n    return ctx\r\n}\r\n\r\n// ── Provider ────────────────────────────────────────────\r\nexport function FluentProvider({ children }: { children: React.ReactNode }) {\r\n    const [settings, setSettings] = useState<AccessibilitySettings>(DEFAULT_SETTINGS)\r\n    const [output, setOutputState] = useState<OutputState>(DEFAULT_OUTPUT)\r\n    const [isSpeaking, setIsSpeaking] = useState(false)\r\n    const [sidebarOpen, setSidebarOpen] = useState(true)\r\n\r\n    // Load settings from localStorage\r\n    useEffect(() => {\r\n        try {\r\n            const saved = localStorage.getItem('fluent-settings')\r\n            if (saved) setSettings({ ...DEFAULT_SETTINGS, ...JSON.parse(saved) })\r\n        } catch { }\r\n    }, [])\r\n\r\n    // Persist settings\r\n    useEffect(() => {\r\n        try { localStorage.setItem('fluent-settings', JSON.stringify(settings)) } catch { }\r\n    }, [settings])\r\n\r\n    // Apply theme class + CSS variables\r\n    useEffect(() => {\r\n        const root = document.documentElement\r\n        root.setAttribute('data-theme', settings.theme)\r\n        root.style.setProperty('--user-font-size', `${settings.fontSize}px`)\r\n        root.style.setProperty('--user-line-height', `${settings.lineHeight}`)\r\n        root.style.setProperty('--user-letter-spacing', `${settings.letterSpacing}px`)\r\n        if (settings.reducedMotion) root.classList.add('reduce-motion')\r\n        else root.classList.remove('reduce-motion')\r\n        if (settings.fontFamily === 'opendyslexic') root.classList.add('font-dyslexic')\r\n        else root.classList.remove('font-dyslexic')\r\n    }, [settings])\r\n\r\n    const updateSetting = useCallback(<K extends keyof AccessibilitySettings>(\r\n        key: K, value: AccessibilitySettings[K]\r\n    ) => {\r\n        setSettings(prev => ({ ...prev, [key]: value }))\r\n    }, [])\r\n\r\n    const resetSettings = useCallback(() => setSettings(DEFAULT_SETTINGS), [])\r\n\r\n    // ── Output management ─────────────────────────────────\r\n    const appendOutput = useCallback((t: string) => {\r\n        setOutputState(prev => {\r\n            const newText = prev.text + t\r\n            const newHistory = [...prev.history.slice(0, prev.historyIndex + 1), newText]\r\n            return { text: newText, history: newHistory, historyIndex: newHistory.length - 1 }\r\n        })\r\n    }, [])\r\n\r\n    const setOutputText = useCallback((t: string) => {\r\n        setOutputState(prev => {\r\n            const newHistory = [...prev.history.slice(0, prev.historyIndex + 1), t]\r\n            return { text: t, history: newHistory, historyIndex: newHistory.length - 1 }\r\n        })\r\n    }, [])\r\n\r\n    const clearOutput = useCallback(() => {\r\n        setOutputState(prev => {\r\n            const newHistory = [...prev.history.slice(0, prev.historyIndex + 1), '']\r\n            return { text: '', history: newHistory, historyIndex: newHistory.length - 1 }\r\n        })\r\n    }, [])\r\n\r\n    const undoOutput = useCallback(() => {\r\n        setOutputState(prev => {\r\n            if (prev.historyIndex <= 0) return prev\r\n            const idx = prev.historyIndex - 1\r\n            return { ...prev, text: prev.history[idx], historyIndex: idx }\r\n        })\r\n    }, [])\r\n\r\n    const redoOutput = useCallback(() => {\r\n        setOutputState(prev => {\r\n            if (prev.historyIndex >= prev.history.length - 1) return prev\r\n            const idx = prev.historyIndex + 1\r\n            return { ...prev, text: prev.history[idx], historyIndex: idx }\r\n        })\r\n    }, [])\r\n\r\n    // ── TTS ───────────────────────────────────────────────\r\n    const speak = useCallback((text?: string) => {\r\n        const t = text || output.text\r\n        if (!t || typeof window === 'undefined') return\r\n        window.speechSynthesis.cancel()\r\n        const u = new SpeechSynthesisUtterance(t)\r\n        u.rate = settings.ttsSpeed\r\n        u.pitch = settings.ttsPitch\r\n        if (settings.ttsVoice) {\r\n            const voice = window.speechSynthesis.getVoices().find(v => v.name === settings.ttsVoice)\r\n            if (voice) u.voice = voice\r\n        }\r\n        u.onend = () => setIsSpeaking(false)\r\n        u.onerror = () => setIsSpeaking(false)\r\n        setIsSpeaking(true)\r\n        window.speechSynthesis.speak(u)\r\n    }, [output.text, settings.ttsSpeed, settings.ttsPitch, settings.ttsVoice])\r\n\r\n    const stopSpeaking = useCallback(() => {\r\n        window.speechSynthesis.cancel()\r\n        setIsSpeaking(false)\r\n    }, [])\r\n\r\n    return (\r\n        <FluentContext.Provider value={{\r\n            settings, updateSetting, resetSettings,\r\n            output, appendOutput, setOutput: setOutputText, clearOutput, undoOutput, redoOutput,\r\n            speak, stopSpeaking, isSpeaking,\r\n            sidebarOpen, setSidebarOpen,\r\n        }}>\r\n            {children}\r\n        </FluentContext.Provider>\r\n    )\r\n}\r\n"],"names":[],"mappings":";;;;;;;AAEA;AAFA;;;AAkDA,2DAA2D;AAC3D,MAAM,mBAA0C;IAC5C,OAAO;IACP,UAAU;IACV,YAAY;IACZ,YAAY;IACZ,eAAe;IACf,eAAe;IACf,YAAY;IACZ,WAAW;IACX,WAAW;IACX,cAAc;IACd,iBAAiB;QAAE,KAAK;QAAK,MAAM;QAAK,WAAW;QAAM,SAAS;IAAK;IACvE,UAAU;IACV,UAAU;IACV,UAAU;IACV,YAAY;IACZ,YAAY;IACZ,aAAa,EAAE;AACnB;AAEA,MAAM,iBAA8B;IAAE,MAAM;IAAI,SAAS;QAAC;KAAG;IAAE,cAAc;AAAE;AAE/E,MAAM,8BAAgB,IAAA,oRAAa,EAA2B;AAEvD,SAAS;IACZ,MAAM,MAAM,IAAA,iRAAU,EAAC;IACvB,IAAI,CAAC,KAAK,MAAM,IAAI,MAAM;IAC1B,OAAO;AACX;AAGO,SAAS,eAAe,EAAE,QAAQ,EAAiC;IACtE,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,+QAAQ,EAAwB;IAChE,MAAM,CAAC,QAAQ,eAAe,GAAG,IAAA,+QAAQ,EAAc;IACvD,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,+QAAQ,EAAC;IAC7C,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,+QAAQ,EAAC;IAE/C,kCAAkC;IAClC,IAAA,gRAAS,EAAC;QACN,IAAI;YACA,MAAM,QAAQ,aAAa,OAAO,CAAC;YACnC,IAAI,OAAO,YAAY;gBAAE,GAAG,gBAAgB;gBAAE,GAAG,KAAK,KAAK,CAAC,MAAM;YAAC;QACvE,EAAE,OAAM,CAAE;IACd,GAAG,EAAE;IAEL,mBAAmB;IACnB,IAAA,gRAAS,EAAC;QACN,IAAI;YAAE,aAAa,OAAO,CAAC,mBAAmB,KAAK,SAAS,CAAC;QAAW,EAAE,OAAM,CAAE;IACtF,GAAG;QAAC;KAAS;IAEb,oCAAoC;IACpC,IAAA,gRAAS,EAAC;QACN,MAAM,OAAO,SAAS,eAAe;QACrC,KAAK,YAAY,CAAC,cAAc,SAAS,KAAK;QAC9C,KAAK,KAAK,CAAC,WAAW,CAAC,oBAAoB,GAAG,SAAS,QAAQ,CAAC,EAAE,CAAC;QACnE,KAAK,KAAK,CAAC,WAAW,CAAC,sBAAsB,GAAG,SAAS,UAAU,EAAE;QACrE,KAAK,KAAK,CAAC,WAAW,CAAC,yBAAyB,GAAG,SAAS,aAAa,CAAC,EAAE,CAAC;QAC7E,IAAI,SAAS,aAAa,EAAE,KAAK,SAAS,CAAC,GAAG,CAAC;aAC1C,KAAK,SAAS,CAAC,MAAM,CAAC;QAC3B,IAAI,SAAS,UAAU,KAAK,gBAAgB,KAAK,SAAS,CAAC,GAAG,CAAC;aAC1D,KAAK,SAAS,CAAC,MAAM,CAAC;IAC/B,GAAG;QAAC;KAAS;IAEb,MAAM,gBAAgB,IAAA,kRAAW,EAAC,CAC9B,KAAQ;QAER,YAAY,CAAA,OAAQ,CAAC;gBAAE,GAAG,IAAI;gBAAE,CAAC,IAAI,EAAE;YAAM,CAAC;IAClD,GAAG,EAAE;IAEL,MAAM,gBAAgB,IAAA,kRAAW,EAAC,IAAM,YAAY,mBAAmB,EAAE;IAEzE,yDAAyD;IACzD,MAAM,eAAe,IAAA,kRAAW,EAAC,CAAC;QAC9B,eAAe,CAAA;YACX,MAAM,UAAU,KAAK,IAAI,GAAG;YAC5B,MAAM,aAAa;mBAAI,KAAK,OAAO,CAAC,KAAK,CAAC,GAAG,KAAK,YAAY,GAAG;gBAAI;aAAQ;YAC7E,OAAO;gBAAE,MAAM;gBAAS,SAAS;gBAAY,cAAc,WAAW,MAAM,GAAG;YAAE;QACrF;IACJ,GAAG,EAAE;IAEL,MAAM,gBAAgB,IAAA,kRAAW,EAAC,CAAC;QAC/B,eAAe,CAAA;YACX,MAAM,aAAa;mBAAI,KAAK,OAAO,CAAC,KAAK,CAAC,GAAG,KAAK,YAAY,GAAG;gBAAI;aAAE;YACvE,OAAO;gBAAE,MAAM;gBAAG,SAAS;gBAAY,cAAc,WAAW,MAAM,GAAG;YAAE;QAC/E;IACJ,GAAG,EAAE;IAEL,MAAM,cAAc,IAAA,kRAAW,EAAC;QAC5B,eAAe,CAAA;YACX,MAAM,aAAa;mBAAI,KAAK,OAAO,CAAC,KAAK,CAAC,GAAG,KAAK,YAAY,GAAG;gBAAI;aAAG;YACxE,OAAO;gBAAE,MAAM;gBAAI,SAAS;gBAAY,cAAc,WAAW,MAAM,GAAG;YAAE;QAChF;IACJ,GAAG,EAAE;IAEL,MAAM,aAAa,IAAA,kRAAW,EAAC;QAC3B,eAAe,CAAA;YACX,IAAI,KAAK,YAAY,IAAI,GAAG,OAAO;YACnC,MAAM,MAAM,KAAK,YAAY,GAAG;YAChC,OAAO;gBAAE,GAAG,IAAI;gBAAE,MAAM,KAAK,OAAO,CAAC,IAAI;gBAAE,cAAc;YAAI;QACjE;IACJ,GAAG,EAAE;IAEL,MAAM,aAAa,IAAA,kRAAW,EAAC;QAC3B,eAAe,CAAA;YACX,IAAI,KAAK,YAAY,IAAI,KAAK,OAAO,CAAC,MAAM,GAAG,GAAG,OAAO;YACzD,MAAM,MAAM,KAAK,YAAY,GAAG;YAChC,OAAO;gBAAE,GAAG,IAAI;gBAAE,MAAM,KAAK,OAAO,CAAC,IAAI;gBAAE,cAAc;YAAI;QACjE;IACJ,GAAG,EAAE;IAEL,yDAAyD;IACzD,MAAM,QAAQ,IAAA,kRAAW,EAAC,CAAC;QACvB,MAAM,IAAI,QAAQ,OAAO,IAAI;QAC7B,wCAAyC;;;QAEzC,MAAM;IAWV,GAAG;QAAC,OAAO,IAAI;QAAE,SAAS,QAAQ;QAAE,SAAS,QAAQ;QAAE,SAAS,QAAQ;KAAC;IAEzE,MAAM,eAAe,IAAA,kRAAW,EAAC;QAC7B,OAAO,eAAe,CAAC,MAAM;QAC7B,cAAc;IAClB,GAAG,EAAE;IAEL,qBACI,4SAAC,cAAc,QAAQ;QAAC,OAAO;YAC3B;YAAU;YAAe;YACzB;YAAQ;YAAc,WAAW;YAAe;YAAa;YAAY;YACzE;YAAO;YAAc;YACrB;YAAa;QACjB;kBACK;;;;;;AAGb"}},
    {"offset": {"line": 229, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Jason/Documents/GitHub/ntu-beyond-binary/frontend/lib/profile-utils.ts"],"sourcesContent":["/**\r\n * Utility functions for user profile management\r\n */\r\n\r\nimport { InputType } from './use-passive-sensing'\r\n\r\n// Mapping from onboarding InputType to app input mode IDs\r\nexport const INPUT_TYPE_TO_MODE_MAP: Record<InputType, string[]> = {\r\n    'voice': ['voice'],\r\n    'motion': ['head-motion'],\r\n    'switch': ['switch'],\r\n    'blink': ['eye-gaze'], // Blink detection falls under eye gaze\r\n    'gaze': ['eye-gaze'],\r\n    'head': ['head-motion'],\r\n    'sign': ['sign'],\r\n    'facial': ['facial'],\r\n    'sip-puff': ['sip-puff'],\r\n    'none': []\r\n}\r\n\r\nexport interface UserProfile {\r\n    name: string\r\n    primaryInput: InputType\r\n    availableInputs: InputType[]\r\n    lastUsed: string\r\n    calibration: {\r\n        primaryInput: InputType\r\n        availableInputs: InputType[]\r\n        precision: 'low' | 'medium' | 'high'\r\n        tremorDetected: boolean\r\n        dwellTime: number\r\n        rangeOfMotion: number\r\n        preferredSpeed: 'slow' | 'medium' | 'fast'\r\n    }\r\n}\r\n\r\n/**\r\n * Get the current user profile from localStorage\r\n */\r\nexport function getCurrentProfile(): UserProfile | null {\r\n    if (typeof window === 'undefined') return null\r\n\r\n    const profileStr = localStorage.getItem('fluent-current-profile')\r\n    if (!profileStr) return null\r\n\r\n    try {\r\n        return JSON.parse(profileStr)\r\n    } catch {\r\n        return null\r\n    }\r\n}\r\n\r\n/**\r\n * Get the list of enabled input mode IDs based on the user's profile\r\n * Returns all modes if no profile is set (for first-time users)\r\n */\r\nexport function getEnabledInputModes(): string[] {\r\n    const profile = getCurrentProfile()\r\n\r\n    // If no profile, allow all modes (user hasn't completed onboarding)\r\n    if (!profile || !profile.availableInputs || profile.availableInputs.length === 0) {\r\n        return ['voice', 'draw', 'haptic', 'type', 'sign', 'eye-gaze', 'head-motion',\r\n            'facial', 'sip-puff', 'switch', 'board', 'custom']\r\n    }\r\n\r\n    // Map detected inputs to mode IDs\r\n    const enabledModes = new Set<string>()\r\n\r\n    for (const inputType of profile.availableInputs) {\r\n        const modes = INPUT_TYPE_TO_MODE_MAP[inputType] || []\r\n        modes.forEach(mode => enabledModes.add(mode))\r\n    }\r\n\r\n    // Always enable these universal modes\r\n    enabledModes.add('board') // Communication board works for everyone\r\n    enabledModes.add('custom') // Custom input is always available\r\n    enabledModes.add('type') // Keyboard is universal\r\n    enabledModes.add('draw') // Drawing is universal\r\n\r\n    return Array.from(enabledModes)\r\n}\r\n\r\n/**\r\n * Check if a specific input mode is enabled for the current user\r\n */\r\nexport function isInputModeEnabled(modeId: string): boolean {\r\n    const enabledModes = getEnabledInputModes()\r\n    return enabledModes.includes(modeId)\r\n}\r\n\r\n/**\r\n * Get the primary input mode ID based on the user's profile\r\n */\r\nexport function getPrimaryInputMode(): string | null {\r\n    const profile = getCurrentProfile()\r\n    if (!profile) return null\r\n\r\n    const modes = INPUT_TYPE_TO_MODE_MAP[profile.primaryInput] || []\r\n    return modes[0] || null\r\n}\r\n"],"names":[],"mappings":"AAAA;;CAEC;;;;;;;;;;;;AAKM,MAAM,yBAAsD;IAC/D,SAAS;QAAC;KAAQ;IAClB,UAAU;QAAC;KAAc;IACzB,UAAU;QAAC;KAAS;IACpB,SAAS;QAAC;KAAW;IACrB,QAAQ;QAAC;KAAW;IACpB,QAAQ;QAAC;KAAc;IACvB,QAAQ;QAAC;KAAO;IAChB,UAAU;QAAC;KAAS;IACpB,YAAY;QAAC;KAAW;IACxB,QAAQ,EAAE;AACd;AAqBO,SAAS;IACZ,wCAAmC,OAAO;;;IAE1C,MAAM;AAQV;AAMO,SAAS;IACZ,MAAM,UAAU;IAEhB,oEAAoE;IACpE,IAAI,CAAC,WAAW,CAAC,QAAQ,eAAe,IAAI,QAAQ,eAAe,CAAC,MAAM,KAAK,GAAG;QAC9E,OAAO;YAAC;YAAS;YAAQ;YAAU;YAAQ;YAAQ;YAAY;YAC3D;YAAU;YAAY;YAAU;YAAS;SAAS;IAC1D;IAEA,kCAAkC;IAClC,MAAM,eAAe,IAAI;IAEzB,KAAK,MAAM,aAAa,QAAQ,eAAe,CAAE;QAC7C,MAAM,QAAQ,sBAAsB,CAAC,UAAU,IAAI,EAAE;QACrD,MAAM,OAAO,CAAC,CAAA,OAAQ,aAAa,GAAG,CAAC;IAC3C;IAEA,sCAAsC;IACtC,aAAa,GAAG,CAAC,UAAS,yCAAyC;IACnE,aAAa,GAAG,CAAC,WAAU,mCAAmC;IAC9D,aAAa,GAAG,CAAC,SAAQ,wBAAwB;IACjD,aAAa,GAAG,CAAC,SAAQ,uBAAuB;IAEhD,OAAO,MAAM,IAAI,CAAC;AACtB;AAKO,SAAS,mBAAmB,MAAc;IAC7C,MAAM,eAAe;IACrB,OAAO,aAAa,QAAQ,CAAC;AACjC;AAKO,SAAS;IACZ,MAAM,UAAU;IAChB,IAAI,CAAC,SAAS,OAAO;IAErB,MAAM,QAAQ,sBAAsB,CAAC,QAAQ,YAAY,CAAC,IAAI,EAAE;IAChE,OAAO,KAAK,CAAC,EAAE,IAAI;AACvB"}},
    {"offset": {"line": 325, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Jason/Documents/GitHub/ntu-beyond-binary/frontend/lib/use-electron.ts"],"sourcesContent":["'use client'\r\n\r\nimport { useEffect } from 'react'\r\n\r\ndeclare global {\r\n    interface Window {\r\n        electron?: {\r\n            getAppVersion: () => Promise<string>\r\n            getAppPath: () => Promise<string>\r\n            executeOnDesktop: (command: string) => Promise<{ success: boolean; message: string }>\r\n            triggerSOS: (data: any) => Promise<{ success: boolean }>\r\n            minimizeToTray: () => void\r\n            onTriggerSOS: (callback: () => void) => void\r\n            onToggleSidebar: (callback: () => void) => void\r\n            onFocusOutput: (callback: () => void) => void\r\n            onSpeakOutput: (callback: () => void) => void\r\n            removeAllListeners: (channel: string) => void\r\n        }\r\n        isElectron?: boolean\r\n    }\r\n}\r\n\r\nexport function useElectron() {\r\n    const isElectron = typeof window !== 'undefined' && window.isElectron\r\n\r\n    return {\r\n        isElectron,\r\n        electron: isElectron ? window.electron : null,\r\n    }\r\n}\r\n\r\nexport function useElectronShortcuts(callbacks: {\r\n    onSOS?: () => void\r\n    onToggleSidebar?: () => void\r\n    onFocusOutput?: () => void\r\n    onSpeakOutput?: () => void\r\n}) {\r\n    const { isElectron, electron } = useElectron()\r\n\r\n    useEffect(() => {\r\n        if (!isElectron || !electron) return\r\n\r\n        if (callbacks.onSOS) {\r\n            electron.onTriggerSOS(callbacks.onSOS)\r\n        }\r\n        if (callbacks.onToggleSidebar) {\r\n            electron.onToggleSidebar(callbacks.onToggleSidebar)\r\n        }\r\n        if (callbacks.onFocusOutput) {\r\n            electron.onFocusOutput(callbacks.onFocusOutput)\r\n        }\r\n        if (callbacks.onSpeakOutput) {\r\n            electron.onSpeakOutput(callbacks.onSpeakOutput)\r\n        }\r\n\r\n        return () => {\r\n            electron.removeAllListeners('trigger-sos')\r\n            electron.removeAllListeners('toggle-sidebar')\r\n            electron.removeAllListeners('focus-output')\r\n            electron.removeAllListeners('speak-output')\r\n        }\r\n    }, [isElectron, electron, callbacks])\r\n}\r\n\r\nexport async function executeOnDesktop(command: string) {\r\n    if (typeof window !== 'undefined' && window.electron) {\r\n        return await window.electron.executeOnDesktop(command)\r\n    }\r\n    console.warn('Not running in Electron - desktop execution not available')\r\n    return { success: false, message: 'Not running in Electron' }\r\n}\r\n\r\nexport async function triggerElectronSOS(data: any) {\r\n    if (typeof window !== 'undefined' && window.electron) {\r\n        return await window.electron.triggerSOS(data)\r\n    }\r\n    return { success: false }\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;AAEA;AAFA;;AAsBO,SAAS;IACZ,MAAM,aAAa,kDAAkB,eAAe,OAAO,UAAU;IAErE,OAAO;QACH;QACA,UAAU,sCAAa,0BAAkB;IAC7C;AACJ;AAEO,SAAS,qBAAqB,SAKpC;IACG,MAAM,EAAE,UAAU,EAAE,QAAQ,EAAE,GAAG;IAEjC,IAAA,gRAAS,EAAC;QACN,IAAI,CAAC,cAAc,CAAC,UAAU;QAE9B,IAAI,UAAU,KAAK,EAAE;YACjB,SAAS,YAAY,CAAC,UAAU,KAAK;QACzC;QACA,IAAI,UAAU,eAAe,EAAE;YAC3B,SAAS,eAAe,CAAC,UAAU,eAAe;QACtD;QACA,IAAI,UAAU,aAAa,EAAE;YACzB,SAAS,aAAa,CAAC,UAAU,aAAa;QAClD;QACA,IAAI,UAAU,aAAa,EAAE;YACzB,SAAS,aAAa,CAAC,UAAU,aAAa;QAClD;QAEA,OAAO;YACH,SAAS,kBAAkB,CAAC;YAC5B,SAAS,kBAAkB,CAAC;YAC5B,SAAS,kBAAkB,CAAC;YAC5B,SAAS,kBAAkB,CAAC;QAChC;IACJ,GAAG;QAAC;QAAY;QAAU;KAAU;AACxC;AAEO,eAAe,iBAAiB,OAAe;IAClD;;IAGA,QAAQ,IAAI,CAAC;IACb,OAAO;QAAE,SAAS;QAAO,SAAS;IAA0B;AAChE;AAEO,eAAe,mBAAmB,IAAS;IAC9C;;IAGA,OAAO;QAAE,SAAS;IAAM;AAC5B"}},
    {"offset": {"line": 393, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Jason/Documents/GitHub/ntu-beyond-binary/frontend/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from 'clsx'\nimport { twMerge } from 'tailwind-merge'\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,oOAAO,EAAC,IAAA,2MAAI,EAAC;AACtB"}},
    {"offset": {"line": 408, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Jason/Documents/GitHub/ntu-beyond-binary/frontend/components/ui/button.tsx"],"sourcesContent":["import * as React from 'react'\nimport { Slot } from '@radix-ui/react-slot'\nimport { cva, type VariantProps } from 'class-variance-authority'\n\nimport { cn } from '@/lib/utils'\n\nconst buttonVariants = cva(\n  'inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0',\n  {\n    variants: {\n      variant: {\n        default: 'bg-primary text-primary-foreground hover:bg-primary/90',\n        destructive:\n          'bg-destructive text-destructive-foreground hover:bg-destructive/90',\n        outline:\n          'border border-input bg-background hover:bg-accent hover:text-accent-foreground',\n        secondary:\n          'bg-secondary text-secondary-foreground hover:bg-secondary/80',\n        ghost: 'hover:bg-accent hover:text-accent-foreground',\n        link: 'text-primary underline-offset-4 hover:underline',\n      },\n      size: {\n        default: 'h-10 px-4 py-2',\n        sm: 'h-9 rounded-md px-3',\n        lg: 'h-11 rounded-md px-8',\n        icon: 'h-10 w-10',\n      },\n    },\n    defaultVariants: {\n      variant: 'default',\n      size: 'default',\n    },\n  },\n)\n\nexport interface ButtonProps\n  extends\n    React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : 'button'\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  },\n)\nButton.displayName = 'Button'\n\nexport { Button, buttonVariants }\n"],"names":[],"mappings":";;;;;;;AAAA;AACA;AACA;AAEA;;;;;;AAEA,MAAM,iBAAiB,IAAA,qOAAG,EACxB,4VACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OAAO;YACP,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;QACR;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AAUF,MAAM,uBAAS,iRAAgB,CAC7B,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,IAAI,EAAE,UAAU,KAAK,EAAE,GAAG,OAAO,EAAE;IACxD,MAAM,OAAO,UAAU,sOAAI,GAAG;IAC9B,qBACE,4SAAC;QACC,WAAW,IAAA,gLAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACxD,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;AAEF,OAAO,WAAW,GAAG"}},
    {"offset": {"line": 468, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Jason/Documents/GitHub/ntu-beyond-binary/frontend/components/output-panel.tsx"],"sourcesContent":["'use client'\r\n\r\nimport React, { useState } from 'react'\r\nimport { useFluentContext } from '@/lib/fluent-context'\r\nimport { executeOnDesktop } from '@/lib/use-electron'\r\nimport { Button } from '@/components/ui/button'\r\nimport {\r\n    Volume2, VolumeX, Copy, Trash2, Undo2, Redo2,\r\n    ChevronUp, ChevronDown, Play, Terminal\r\n} from 'lucide-react'\r\n\r\nexport function OutputPanel() {\r\n    const { output, clearOutput, undoOutput, redoOutput, speak, stopSpeaking, isSpeaking } = useFluentContext()\r\n    const [expanded, setExpanded] = useState(false)\r\n\r\n    const wordCount = output.text.trim() ? output.text.trim().split(/\\s+/).length : 0\r\n    const charCount = output.text.length\r\n\r\n    const copyToClipboard = async () => {\r\n        if (!output.text) return\r\n        try {\r\n            await navigator.clipboard.writeText(output.text)\r\n        } catch (err) {\r\n            // Clipboard permission denied - this is expected in some browsers/contexts\r\n            console.log('Clipboard access not available')\r\n        }\r\n    }\r\n\r\n    const handleExecute = async () => {\r\n        if (!output.text) return\r\n        const result = await executeOnDesktop(output.text)\r\n        console.log('Desktop execution result:', result)\r\n    }\r\n\r\n    return (\r\n        <div className=\"border-t-4 border-border bg-card flex-shrink-0\" role=\"region\" aria-label=\"Output panel\">\r\n            {/* Toggle bar */}\r\n            <button\r\n                onClick={() => setExpanded(!expanded)}\r\n                className=\"w-full flex items-center justify-between px-4 py-2 hover:bg-muted transition-colors\"\r\n                aria-expanded={expanded}\r\n            >\r\n                <div className=\"flex items-center gap-2\">\r\n                    <Terminal className=\"h-4 w-4 text-muted-foreground\" />\r\n                    <span className=\"font-bold text-sm\">Output</span>\r\n                    {output.text && (\r\n                        <span className=\"text-xs text-muted-foreground\">\r\n                            {wordCount} words · {charCount} chars\r\n                        </span>\r\n                    )}\r\n                </div>\r\n                {expanded ? <ChevronDown className=\"h-4 w-4\" /> : <ChevronUp className=\"h-4 w-4\" />}\r\n            </button>\r\n\r\n            {/* Expanded content */}\r\n            {expanded && (\r\n                <div className=\"px-4 pb-3 space-y-2\">\r\n                    {/* Text display */}\r\n                    <div className=\"min-h-[60px] max-h-[150px] overflow-y-auto rounded-lg border-2 border-border bg-input p-3 text-sm font-medium\">\r\n                        {output.text || <span className=\"text-muted-foreground italic\">No text yet — use an input mode to start</span>}\r\n                    </div>\r\n\r\n                    {/* Action buttons */}\r\n                    <div className=\"flex flex-wrap gap-2\">\r\n                        <Button\r\n                            size=\"sm\"\r\n                            onClick={() => isSpeaking ? stopSpeaking() : speak()}\r\n                            disabled={!output.text}\r\n                            className=\"gap-1.5 font-bold text-xs border-2 border-border shadow-[2px_2px_0px_0px_rgba(0,0,0,1)] hover:shadow-[1px_1px_0px_0px_rgba(0,0,0,1)] hover:translate-x-[1px] hover:translate-y-[1px] transition-all\"\r\n                            aria-label={isSpeaking ? 'Stop speaking' : 'Speak text aloud'}\r\n                        >\r\n                            {isSpeaking ? <VolumeX className=\"h-3.5 w-3.5\" /> : <Volume2 className=\"h-3.5 w-3.5\" />}\r\n                            {isSpeaking ? 'Stop' : 'Speak'}\r\n                        </Button>\r\n\r\n                        <Button\r\n                            size=\"sm\" variant=\"outline\"\r\n                            onClick={copyToClipboard}\r\n                            disabled={!output.text}\r\n                            className=\"gap-1.5 font-bold text-xs border-2 border-border shadow-[2px_2px_0px_0px_rgba(0,0,0,1)] hover:shadow-[1px_1px_0px_0px_rgba(0,0,0,1)] hover:translate-x-[1px] hover:translate-y-[1px] transition-all\"\r\n                            aria-label=\"Copy text to clipboard\"\r\n                        >\r\n                            <Copy className=\"h-3.5 w-3.5\" /> Copy\r\n                        </Button>\r\n\r\n                        <Button\r\n                            size=\"sm\" variant=\"outline\"\r\n                            onClick={undoOutput}\r\n                            disabled={output.historyIndex <= 0}\r\n                            className=\"gap-1.5 font-bold text-xs border-2 border-border shadow-[2px_2px_0px_0px_rgba(0,0,0,1)] hover:shadow-[1px_1px_0px_0px_rgba(0,0,0,1)] hover:translate-x-[1px] hover:translate-y-[1px] transition-all\"\r\n                            aria-label=\"Undo\"\r\n                        >\r\n                            <Undo2 className=\"h-3.5 w-3.5\" />\r\n                        </Button>\r\n\r\n                        <Button\r\n                            size=\"sm\" variant=\"outline\"\r\n                            onClick={redoOutput}\r\n                            disabled={output.historyIndex >= output.history.length - 1}\r\n                            className=\"gap-1.5 font-bold text-xs border-2 border-border shadow-[2px_2px_0px_0px_rgba(0,0,0,1)] hover:shadow-[1px_1px_0px_0px_rgba(0,0,0,1)] hover:translate-x-[1px] hover:translate-y-[1px] transition-all\"\r\n                            aria-label=\"Redo\"\r\n                        >\r\n                            <Redo2 className=\"h-3.5 w-3.5\" />\r\n                        </Button>\r\n\r\n                        <div className=\"flex-1\" />\r\n\r\n                        <Button\r\n                            size=\"sm\" variant=\"outline\"\r\n                            onClick={handleExecute}\r\n                            disabled={!output.text}\r\n                            className=\"gap-1.5 font-bold text-xs border-2 border-border bg-primary text-primary-foreground shadow-[2px_2px_0px_0px_rgba(0,0,0,1)] hover:shadow-[1px_1px_0px_0px_rgba(0,0,0,1)] hover:translate-x-[1px] hover:translate-y-[1px] transition-all\"\r\n                            aria-label=\"Execute on desktop\"\r\n                        >\r\n                            <Play className=\"h-3.5 w-3.5\" /> Execute\r\n                        </Button>\r\n\r\n                        <Button\r\n                            size=\"sm\" variant=\"outline\"\r\n                            onClick={clearOutput}\r\n                            disabled={!output.text}\r\n                            className=\"gap-1.5 font-bold text-xs border-2 border-border text-destructive shadow-[2px_2px_0px_0px_rgba(0,0,0,1)] hover:shadow-[1px_1px_0px_0px_rgba(0,0,0,1)] hover:translate-x-[1px] hover:translate-y-[1px] transition-all\"\r\n                            aria-label=\"Clear all text\"\r\n                        >\r\n                            <Trash2 className=\"h-3.5 w-3.5\" /> Clear\r\n                        </Button>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    )\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 761, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Jason/Documents/GitHub/ntu-beyond-binary/frontend/components/sos-button.tsx"],"sourcesContent":["'use client'\r\n\r\nimport React, { useState } from 'react'\r\nimport { ShieldAlert } from 'lucide-react'\r\n\r\ninterface SOSButtonProps {\r\n    compact?: boolean\r\n}\r\n\r\nexport function SOSButton({ compact }: SOSButtonProps) {\r\n    const [triggered, setTriggered] = useState(false)\r\n    const [confirmOpen, setConfirmOpen] = useState(false)\r\n\r\n    const triggerSOS = () => {\r\n        setConfirmOpen(true)\r\n    }\r\n\r\n    const confirmSOS = () => {\r\n        setTriggered(true)\r\n        setConfirmOpen(false)\r\n        // In production: send emergency message to contacts\r\n        // For now, show alert and vibrate if available\r\n        if (navigator.vibrate) navigator.vibrate([200, 100, 200, 100, 200])\r\n        setTimeout(() => setTriggered(false), 5000)\r\n    }\r\n\r\n    return (\r\n        <div className=\"relative\">\r\n            <button\r\n                onClick={triggerSOS}\r\n                className={`flex items-center ${compact ? 'justify-center p-2 rounded-full aspect-square' : 'gap-2 w-full px-3 py-2.5 rounded-lg'} font-black text-sm transition-all ${triggered\r\n                        ? 'bg-destructive text-destructive-foreground animate-pulse'\r\n                        : 'bg-destructive/90 text-destructive-foreground hover:bg-destructive shadow-[3px_3px_0px_0px_rgba(0,0,0,1)] hover:shadow-[1px_1px_0px_0px_rgba(0,0,0,1)] hover:translate-x-[1px] hover:translate-y-[1px]'\r\n                    }`}\r\n                aria-label=\"Emergency SOS\"\r\n            >\r\n                <ShieldAlert className=\"h-5 w-5 flex-shrink-0\" />\r\n                {!compact && <span>{triggered ? 'SOS SENT' : 'SOS'}</span>}\r\n            </button>\r\n\r\n            {/* Confirmation dialog */}\r\n            {confirmOpen && (\r\n                <div className=\"absolute bottom-full left-0 right-0 mb-2 p-3 bg-card border-4 border-destructive rounded-xl shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] z-50\">\r\n                    <p className=\"text-sm font-bold mb-2\">Send emergency alert?</p>\r\n                    <div className=\"flex gap-2\">\r\n                        <button\r\n                            onClick={confirmSOS}\r\n                            className=\"flex-1 py-1.5 bg-destructive text-destructive-foreground rounded-lg font-bold text-xs border-2 border-border\"\r\n                        >\r\n                            Send SOS\r\n                        </button>\r\n                        <button\r\n                            onClick={() => setConfirmOpen(false)}\r\n                            className=\"flex-1 py-1.5 bg-muted text-foreground rounded-lg font-bold text-xs border-2 border-border\"\r\n                        >\r\n                            Cancel\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    )\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AASO,SAAS,UAAU,EAAE,OAAO,EAAkB;IACjD,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,+QAAQ,EAAC;IAC3C,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,+QAAQ,EAAC;IAE/C,MAAM,aAAa;QACf,eAAe;IACnB;IAEA,MAAM,aAAa;QACf,aAAa;QACb,eAAe;QACf,oDAAoD;QACpD,+CAA+C;QAC/C,IAAI,UAAU,OAAO,EAAE,UAAU,OAAO,CAAC;YAAC;YAAK;YAAK;YAAK;YAAK;SAAI;QAClE,WAAW,IAAM,aAAa,QAAQ;IAC1C;IAEA,qBACI,4SAAC;QAAI,WAAU;;0BACX,4SAAC;gBACG,SAAS;gBACT,WAAW,CAAC,kBAAkB,EAAE,UAAU,kDAAkD,sCAAsC,mCAAmC,EAAE,YAC7J,6DACA,0MACJ;gBACN,cAAW;;kCAEX,4SAAC,iSAAW;wBAAC,WAAU;;;;;;oBACtB,CAAC,yBAAW,4SAAC;kCAAM,YAAY,aAAa;;;;;;;;;;;;YAIhD,6BACG,4SAAC;gBAAI,WAAU;;kCACX,4SAAC;wBAAE,WAAU;kCAAyB;;;;;;kCACtC,4SAAC;wBAAI,WAAU;;0CACX,4SAAC;gCACG,SAAS;gCACT,WAAU;0CACb;;;;;;0CAGD,4SAAC;gCACG,SAAS,IAAM,eAAe;gCAC9B,WAAU;0CACb;;;;;;;;;;;;;;;;;;;;;;;;AAQzB"}},
    {"offset": {"line": 875, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Jason/Documents/GitHub/ntu-beyond-binary/frontend/components/app-shell.tsx"],"sourcesContent":["'use client'\r\n\r\nimport React, { useState, useEffect } from 'react'\r\nimport Link from 'next/link'\r\nimport { usePathname, useRouter } from 'next/navigation'\r\nimport { useFluentContext } from '@/lib/fluent-context'\r\nimport { getEnabledInputModes } from '@/lib/profile-utils'\r\nimport { OutputPanel } from '@/components/output-panel'\r\nimport { SOSButton } from '@/components/sos-button'\r\nimport {\r\n    Mic, Pencil, Hand, Keyboard, Accessibility, Eye, Move,\r\n    Smile, Wind, ToggleLeft, LayoutGrid, Sparkles,\r\n    Settings, Home, PanelLeftClose, PanelLeft, LogOut\r\n} from 'lucide-react'\r\n\r\nexport const INPUT_MODES = [\r\n    { id: 'voice', label: 'Voice', icon: Mic, href: '/input/voice', color: 'bg-blue-500' },\r\n    { id: 'draw', label: 'Draw', icon: Pencil, href: '/input/draw', color: 'bg-orange-500' },\r\n    { id: 'haptic', label: 'Haptic', icon: Hand, href: '/input/haptic', color: 'bg-purple-500' },\r\n    { id: 'type', label: 'Type', icon: Keyboard, href: '/input/type', color: 'bg-green-500' },\r\n    { id: 'sign', label: 'Sign', icon: Accessibility, href: '/input/sign', color: 'bg-pink-500' },\r\n    { id: 'eye-gaze', label: 'Eye Gaze', icon: Eye, href: '/input/eye-gaze', color: 'bg-cyan-500' },\r\n    { id: 'head-motion', label: 'Head', icon: Move, href: '/input/head-motion', color: 'bg-amber-500' },\r\n    { id: 'facial', label: 'Facial', icon: Smile, href: '/input/facial', color: 'bg-rose-500' },\r\n    { id: 'sip-puff', label: 'Sip/Puff', icon: Wind, href: '/input/sip-puff', color: 'bg-teal-500' },\r\n    { id: 'switch', label: 'Switch', icon: ToggleLeft, href: '/input/switch', color: 'bg-indigo-500' },\r\n    { id: 'board', label: 'Board', icon: LayoutGrid, href: '/input/communication-board', color: 'bg-yellow-600' },\r\n    { id: 'custom', label: 'Custom', icon: Sparkles, href: '/input/custom', color: 'bg-violet-500' },\r\n]\r\n\r\nexport function AppShell({ children }: { children: React.ReactNode }) {\r\n    const { sidebarOpen, setSidebarOpen } = useFluentContext()\r\n    const pathname = usePathname()\r\n    const router = useRouter()\r\n    const [enabledModes, setEnabledModes] = useState<string[]>([])\r\n\r\n    // Load enabled modes on mount\r\n    useEffect(() => {\r\n        setEnabledModes(getEnabledInputModes())\r\n    }, [])\r\n\r\n    // Filter INPUT_MODES based on user's profile\r\n    const filteredModes = INPUT_MODES.filter(mode => enabledModes.includes(mode.id))\r\n\r\n    // Auto-collapse sidebar when window is small\r\n    useEffect(() => {\r\n        const handleResize = () => {\r\n            if (window.innerWidth < 600 && sidebarOpen) {\r\n                setSidebarOpen(false)\r\n            }\r\n        }\r\n\r\n        handleResize() // Check on mount\r\n        window.addEventListener('resize', handleResize)\r\n        return () => window.removeEventListener('resize', handleResize)\r\n    }, [sidebarOpen, setSidebarOpen])\r\n\r\n    const handleSignOut = () => {\r\n        localStorage.removeItem('fluent-current-profile')\r\n        router.push('/profile-select')\r\n    }\r\n\r\n    return (\r\n        <div className=\"flex flex-1 overflow-hidden\">\r\n            {/* ── Sidebar ──────────────────────────────────── */}\r\n            <aside\r\n                className={`flex flex-col border-r-4 border-border bg-[hsl(var(--sidebar-bg))] transition-all duration-200 flex-shrink-0 ${sidebarOpen ? 'w-56' : 'w-16'\r\n                    }`}\r\n                role=\"navigation\"\r\n                aria-label=\"Main navigation\"\r\n            >\r\n                {/* Toggle */}\r\n                <div className=\"flex items-center justify-between p-2 sm:p-3 border-b-4 border-border\">\r\n                    {sidebarOpen && (\r\n                        <Link href=\"/\" className=\"font-black text-base sm:text-lg text-foreground tracking-tight\">\r\n                            Fluent\r\n                        </Link>\r\n                    )}\r\n                    <button\r\n                        onClick={() => setSidebarOpen(!sidebarOpen)}\r\n                        className=\"p-1.5 sm:p-2 rounded-lg hover:bg-muted transition-colors\"\r\n                        aria-label={sidebarOpen ? 'Collapse sidebar' : 'Expand sidebar'}\r\n                    >\r\n                        {sidebarOpen ? <PanelLeftClose className=\"h-4 w-4 sm:h-5 sm:w-5\" /> : <PanelLeft className=\"h-4 w-4 sm:h-5 sm:w-5\" />}\r\n                    </button>\r\n                </div>\r\n\r\n                {/* Home */}\r\n                <Link\r\n                    href=\"/\"\r\n                    className={`flex items-center ${sidebarOpen ? 'gap-2 sm:gap-3 px-2 sm:px-3 py-2 sm:py-2.5' : 'justify-center p-2.5'} mx-1.5 sm:mx-2 mt-1.5 sm:mt-2 ${sidebarOpen ? 'rounded-lg' : 'rounded-full aspect-square'} font-bold text-xs sm:text-sm transition-all ${pathname === '/'\r\n                        ? 'bg-primary text-primary-foreground shadow-[2px_2px_0px_0px_rgba(0,0,0,1)] sm:shadow-[3px_3px_0px_0px_rgba(0,0,0,1)]'\r\n                        : 'hover:bg-muted text-foreground'\r\n                        }`}\r\n                    aria-current={pathname === '/' ? 'page' : undefined}\r\n                >\r\n                    <Home className=\"h-4 w-4 sm:h-5 sm:w-5 flex-shrink-0\" />\r\n                    {sidebarOpen && <span>Dashboard</span>}\r\n                </Link>\r\n\r\n                {/* Mode links */}\r\n                <div className=\"flex-1 overflow-y-auto px-1.5 sm:px-2 py-1.5 sm:py-2 space-y-0.5 custom-scrollbar\" role=\"list\" aria-label=\"Input modes\">\r\n                    {filteredModes.map((mode) => {\r\n                        const Icon = mode.icon\r\n                        const isActive = pathname.startsWith(mode.href)\r\n                        return (\r\n                            <Link\r\n                                key={mode.id}\r\n                                href={mode.href}\r\n                                role=\"listitem\"\r\n                                className={`flex items-center ${sidebarOpen ? 'gap-2 sm:gap-3 px-2 sm:px-3 py-1.5 sm:py-2' : 'justify-center p-2'} ${sidebarOpen ? 'rounded-lg' : 'rounded-full aspect-square'} font-semibold text-xs sm:text-sm transition-all ${isActive\r\n                                    ? 'bg-primary text-primary-foreground shadow-[2px_2px_0px_0px_rgba(0,0,0,1)] sm:shadow-[3px_3px_0px_0px_rgba(0,0,0,1)]'\r\n                                    : 'hover:bg-muted text-foreground'\r\n                                    }`}\r\n                                aria-current={isActive ? 'page' : undefined}\r\n                                title={mode.label}\r\n                            >\r\n                                <Icon className=\"h-3.5 w-3.5 sm:h-4 sm:w-4 flex-shrink-0\" />\r\n                                {sidebarOpen && <span>{mode.label}</span>}\r\n                            </Link>\r\n                        )\r\n                    })}\r\n                </div>\r\n\r\n                {/* Bottom: Settings, Sign Out, SOS */}\r\n                <div className=\"border-t-4 border-border p-1.5 sm:p-2 space-y-0.5 sm:space-y-1\">\r\n                    <Link\r\n                        href=\"/settings\"\r\n                        className={`flex items-center ${sidebarOpen ? 'gap-2 sm:gap-3 px-2 sm:px-3 py-1.5 sm:py-2' : 'justify-center p-2'} ${sidebarOpen ? 'rounded-lg' : 'rounded-full aspect-square'} font-semibold text-xs sm:text-sm transition-all ${pathname === '/settings'\r\n                            ? 'bg-primary text-primary-foreground shadow-[2px_2px_0px_0px_rgba(0,0,0,1)] sm:shadow-[3px_3px_0px_0px_rgba(0,0,0,1)]'\r\n                            : 'hover:bg-muted text-foreground'\r\n                            }`}\r\n                    >\r\n                        <Settings className=\"h-3.5 w-3.5 sm:h-4 sm:w-4 flex-shrink-0\" />\r\n                        {sidebarOpen && <span>Settings</span>}\r\n                    </Link>\r\n\r\n                    <button\r\n                        onClick={handleSignOut}\r\n                        className={`w-full flex items-center ${sidebarOpen ? 'gap-2 sm:gap-3 px-2 sm:px-3 py-1.5 sm:py-2' : 'justify-center p-2'} ${sidebarOpen ? 'rounded-lg' : 'rounded-full aspect-square'} font-semibold text-xs sm:text-sm transition-all hover:bg-muted text-foreground`}\r\n                        aria-label=\"Sign out\"\r\n                    >\r\n                        <LogOut className=\"h-3.5 w-3.5 sm:h-4 sm:w-4 flex-shrink-0\" />\r\n                        {sidebarOpen && <span>Sign Out</span>}\r\n                    </button>\r\n\r\n                    <SOSButton compact={!sidebarOpen} />\r\n                </div>\r\n            </aside>\r\n\r\n            {/* ── Main Content + Output ────────────────────── */}\r\n            <div className=\"flex-1 flex flex-col min-w-0 overflow-hidden\">\r\n                <main className=\"flex-1 overflow-y-auto p-2 sm:p-6 custom-scrollbar\">{children}</main>\r\n                <OutputPanel />\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport { INPUT_MODES }\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1249, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Jason/Documents/GitHub/ntu-beyond-binary/frontend/components/title-bar.tsx"],"sourcesContent":["'use client'\r\n\r\nimport React, { useState, useEffect } from 'react'\r\nimport { X, Minimize2, Maximize2 } from 'lucide-react'\r\nimport { useFluentContext } from '@/lib/fluent-context'\r\n\r\nexport function TitleBar() {\r\n    const [isElectron, setIsElectron] = useState(false)\r\n    const [isDocked, setIsDocked] = useState(false)\r\n    const { settings, updateSetting } = useFluentContext()\r\n\r\n    useEffect(() => {\r\n        // Check if running in Electron\r\n        if (typeof window !== 'undefined' && window.isElectron) {\r\n            setIsElectron(true)\r\n\r\n            // Get initial dock state\r\n            if (window.electron?.getDockState) {\r\n                window.electron.getDockState().then((state) => {\r\n                    setIsDocked(state.isDocked)\r\n                })\r\n            }\r\n\r\n            // Listen for dock state changes\r\n            if (window.electron?.onDockStateChanged) {\r\n                window.electron.onDockStateChanged((data) => {\r\n                    setIsDocked(data.isDocked)\r\n                })\r\n            }\r\n\r\n            return () => {\r\n                if (window.electron?.removeAllListeners) {\r\n                    window.electron.removeAllListeners('dock-state-changed')\r\n                }\r\n            }\r\n        }\r\n    }, [])\r\n\r\n    const handleClose = () => {\r\n        if (window.electron?.closeWindow) {\r\n            window.electron.closeWindow()\r\n        }\r\n    }\r\n\r\n    const handleToggleDock = async () => {\r\n        if (window.electron?.toggleDock) {\r\n            try {\r\n                const result = await window.electron.toggleDock()\r\n                if (result.success) {\r\n                    setIsDocked(result.isDocked)\r\n                }\r\n            } catch (error) {\r\n                console.error('Failed to toggle dock:', error)\r\n            }\r\n        }\r\n    }\r\n\r\n    const decreaseTextSize = () => {\r\n        const newSize = Math.max(12, settings.fontSize - 2)\r\n        updateSetting('fontSize', newSize)\r\n    }\r\n\r\n    const increaseTextSize = () => {\r\n        const newSize = Math.min(32, settings.fontSize + 2)\r\n        updateSetting('fontSize', newSize)\r\n    }\r\n\r\n    const resetTextSize = () => {\r\n        updateSetting('fontSize', 16)\r\n    }\r\n\r\n    const getTextSizePercentage = () => {\r\n        // Base size is 16px = 100%\r\n        return Math.round((settings.fontSize / 16) * 100)\r\n    }\r\n\r\n    return (\r\n        <div\r\n            className=\"fixed top-0 left-0 right-0 h-10 bg-[#FFEB3B] border-b-4 border-border flex items-center justify-between z-50 px-2 sm:px-4\"\r\n            style={{\r\n                WebkitAppRegion: 'drag',\r\n                userSelect: 'none'\r\n            } as React.CSSProperties}\r\n        >\r\n            {/* Text Size Controls */}\r\n            <div\r\n                className=\"flex items-center gap-0.5 sm:gap-1\"\r\n                style={{ WebkitAppRegion: 'no-drag' } as React.CSSProperties}\r\n            >\r\n                <button\r\n                    onClick={decreaseTextSize}\r\n                    className=\"w-7 sm:w-8 h-6 sm:h-7 flex items-center justify-center rounded-md bg-background border-2 border-border hover:bg-muted transition-colors font-bold text-xs sm:text-sm shadow-[2px_2px_0px_0px_rgba(0,0,0,1)] hover:shadow-[1px_1px_0px_0px_rgba(0,0,0,1)] hover:translate-x-[1px] hover:translate-y-[1px]\"\r\n                    aria-label=\"Decrease text size\"\r\n                    disabled={settings.fontSize <= 12}\r\n                >\r\n                    -\r\n                </button>\r\n                <button\r\n                    onClick={resetTextSize}\r\n                    className=\"min-w-[50px] sm:min-w-[60px] h-6 sm:h-7 flex items-center justify-center rounded-md bg-background border-2 border-border hover:bg-muted transition-colors font-bold text-xs shadow-[2px_2px_0px_0px_rgba(0,0,0,1)] hover:shadow-[1px_1px_0px_0px_rgba(0,0,0,1)] hover:translate-x-[1px] hover:translate-y-[1px] px-1 sm:px-2\"\r\n                    aria-label=\"Reset text size to 100%\"\r\n                >\r\n                    {getTextSizePercentage()}%\r\n                </button>\r\n                <button\r\n                    onClick={increaseTextSize}\r\n                    className=\"w-7 sm:w-8 h-6 sm:h-7 flex items-center justify-center rounded-md bg-background border-2 border-border hover:bg-muted transition-colors font-bold text-xs sm:text-sm shadow-[2px_2px_0px_0px_rgba(0,0,0,1)] hover:shadow-[1px_1px_0px_0px_rgba(0,0,0,1)] hover:translate-x-[1px] hover:translate-y-[1px]\"\r\n                    aria-label=\"Increase text size\"\r\n                    disabled={settings.fontSize >= 32}\r\n                >\r\n                    +\r\n                </button>\r\n            </div>\r\n\r\n            {/* Window controls */}\r\n            <div\r\n                className=\"flex items-center gap-1 sm:gap-2\"\r\n                style={{ WebkitAppRegion: 'no-drag' } as React.CSSProperties}\r\n            >\r\n                {/* Dock button */}\r\n                <button\r\n                    onClick={handleToggleDock}\r\n                    className=\"w-7 sm:w-8 h-7 sm:h-8 flex items-center justify-center rounded-md hover:bg-black/10 transition-colors\"\r\n                    aria-label={isDocked ? 'Undock window' : 'Dock window'}\r\n                    title={isDocked ? 'Undock window' : 'Dock window'}\r\n                >\r\n                    {isDocked ? (\r\n                        <Maximize2 className=\"h-3.5 sm:h-4 w-3.5 sm:w-4\" />\r\n                    ) : (\r\n                        <Minimize2 className=\"h-3.5 sm:h-4 w-3.5 sm:w-4\" />\r\n                    )}\r\n                </button>\r\n\r\n                {/* Close */}\r\n                <button\r\n                    onClick={handleClose}\r\n                    className=\"w-7 sm:w-8 h-7 sm:h-8 flex items-center justify-center rounded-md hover:bg-red-500 hover:text-white transition-colors\"\r\n                    aria-label=\"Close window\"\r\n                >\r\n                    <X className=\"h-3.5 sm:h-4 w-3.5 sm:w-4\" />\r\n                </button>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AAAA;AACA;AAJA;;;;;AAMO,SAAS;IACZ,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,+QAAQ,EAAC;IAC7C,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,+QAAQ,EAAC;IACzC,MAAM,EAAE,QAAQ,EAAE,aAAa,EAAE,GAAG,IAAA,2MAAgB;IAEpD,IAAA,gRAAS,EAAC;QACN,+BAA+B;QAC/B;;IAuBJ,GAAG,EAAE;IAEL,MAAM,cAAc;QAChB,IAAI,OAAO,QAAQ,EAAE,aAAa;YAC9B,OAAO,QAAQ,CAAC,WAAW;QAC/B;IACJ;IAEA,MAAM,mBAAmB;QACrB,IAAI,OAAO,QAAQ,EAAE,YAAY;YAC7B,IAAI;gBACA,MAAM,SAAS,MAAM,OAAO,QAAQ,CAAC,UAAU;gBAC/C,IAAI,OAAO,OAAO,EAAE;oBAChB,YAAY,OAAO,QAAQ;gBAC/B;YACJ,EAAE,OAAO,OAAO;gBACZ,QAAQ,KAAK,CAAC,0BAA0B;YAC5C;QACJ;IACJ;IAEA,MAAM,mBAAmB;QACrB,MAAM,UAAU,KAAK,GAAG,CAAC,IAAI,SAAS,QAAQ,GAAG;QACjD,cAAc,YAAY;IAC9B;IAEA,MAAM,mBAAmB;QACrB,MAAM,UAAU,KAAK,GAAG,CAAC,IAAI,SAAS,QAAQ,GAAG;QACjD,cAAc,YAAY;IAC9B;IAEA,MAAM,gBAAgB;QAClB,cAAc,YAAY;IAC9B;IAEA,MAAM,wBAAwB;QAC1B,2BAA2B;QAC3B,OAAO,KAAK,KAAK,CAAC,AAAC,SAAS,QAAQ,GAAG,KAAM;IACjD;IAEA,qBACI,4SAAC;QACG,WAAU;QACV,OAAO;YACH,iBAAiB;YACjB,YAAY;QAChB;;0BAGA,4SAAC;gBACG,WAAU;gBACV,OAAO;oBAAE,iBAAiB;gBAAU;;kCAEpC,4SAAC;wBACG,SAAS;wBACT,WAAU;wBACV,cAAW;wBACX,UAAU,SAAS,QAAQ,IAAI;kCAClC;;;;;;kCAGD,4SAAC;wBACG,SAAS;wBACT,WAAU;wBACV,cAAW;;4BAEV;4BAAwB;;;;;;;kCAE7B,4SAAC;wBACG,SAAS;wBACT,WAAU;wBACV,cAAW;wBACX,UAAU,SAAS,QAAQ,IAAI;kCAClC;;;;;;;;;;;;0BAML,4SAAC;gBACG,WAAU;gBACV,OAAO;oBAAE,iBAAiB;gBAAU;;kCAGpC,4SAAC;wBACG,SAAS;wBACT,WAAU;wBACV,cAAY,WAAW,kBAAkB;wBACzC,OAAO,WAAW,kBAAkB;kCAEnC,yBACG,4SAAC,2RAAS;4BAAC,WAAU;;;;;iDAErB,4SAAC,2RAAS;4BAAC,WAAU;;;;;;;;;;;kCAK7B,4SAAC;wBACG,SAAS;wBACT,WAAU;wBACV,cAAW;kCAEX,cAAA,4SAAC,+PAAC;4BAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;AAKjC"}},
    {"offset": {"line": 1421, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Jason/Documents/GitHub/ntu-beyond-binary/frontend/components/client-layout.tsx"],"sourcesContent":["'use client'\r\n\r\nimport React, { useEffect, useState } from 'react'\r\nimport { usePathname, useRouter } from 'next/navigation'\r\nimport { FluentProvider } from '@/lib/fluent-context'\r\nimport { AppShell } from '@/components/app-shell'\r\nimport { TitleBar } from '@/components/title-bar'\r\n\r\nexport function ClientLayout({ children }: { children: React.ReactNode }) {\r\n    const pathname = usePathname()\r\n    const router = useRouter()\r\n    const [isOnboarding, setIsOnboarding] = useState(false)\r\n    const [isProfileSelect, setIsProfileSelect] = useState(false)\r\n    const [checkComplete, setCheckComplete] = useState(false)\r\n\r\n    useEffect(() => {\r\n        console.log('ClientLayout check - pathname:', pathname)\r\n\r\n        // Don't redirect if already on onboarding or profile-select pages\r\n        if (pathname === '/onboarding' || pathname === '/profile-select') {\r\n            console.log('Already on special page, skipping redirect check')\r\n            setIsOnboarding(pathname === '/onboarding')\r\n            setIsProfileSelect(pathname === '/profile-select')\r\n            setCheckComplete(true)\r\n            return\r\n        }\r\n\r\n        // Check for intentional navigation flag\r\n        const intentionalNav = sessionStorage.getItem('fluent-intentional-nav')\r\n        if (intentionalNav) {\r\n            console.log('Intentional navigation detected, clearing flag')\r\n            sessionStorage.removeItem('fluent-intentional-nav')\r\n            setCheckComplete(true)\r\n            return\r\n        }\r\n\r\n        // Check if user has a current profile\r\n        const currentProfile = localStorage.getItem('fluent-current-profile')\r\n        const onboardingComplete = localStorage.getItem('fluent-onboarding-complete')\r\n\r\n        console.log('Profile check - current:', currentProfile, 'complete:', onboardingComplete)\r\n\r\n        // If no current profile, go to profile select\r\n        if (!currentProfile) {\r\n            console.log('No profile, redirecting to profile-select')\r\n            setIsProfileSelect(true)\r\n            router.replace('/profile-select')\r\n        }\r\n        // If profile exists but onboarding not complete, go to onboarding\r\n        else if (!onboardingComplete) {\r\n            console.log('Profile exists but incomplete, redirecting to onboarding')\r\n            setIsOnboarding(true)\r\n            router.replace('/onboarding')\r\n        } else {\r\n            console.log('Profile complete, staying on current page')\r\n            setIsOnboarding(false)\r\n            setIsProfileSelect(false)\r\n        }\r\n\r\n        setCheckComplete(true)\r\n    }, [pathname, router])\r\n\r\n    // Don't render until we've checked profile status\r\n    if (!checkComplete) {\r\n        return (\r\n            <div className=\"fixed inset-0 bg-black flex items-center justify-center\">\r\n                <div className=\"w-16 h-16 rounded-full bg-white animate-pulse\" />\r\n            </div>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <FluentProvider>\r\n            <div className=\"flex flex-col h-screen overflow-hidden\">\r\n                {/* Title Bar - shown on all pages */}\r\n                <TitleBar />\r\n\r\n                {/* Main content area with top padding for fixed title bar */}\r\n                <div className=\"flex-1 overflow-hidden pt-10\">\r\n                    {/* If on onboarding or profile select page, don't show AppShell */}\r\n                    {(isOnboarding || isProfileSelect) ? (\r\n                        children\r\n                    ) : (\r\n                        <AppShell>{children}</AppShell>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </FluentProvider>\r\n    )\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AANA;;;;;;;AAQO,SAAS,aAAa,EAAE,QAAQ,EAAiC;IACpE,MAAM,WAAW,IAAA,+MAAW;IAC5B,MAAM,SAAS,IAAA,6MAAS;IACxB,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,+QAAQ,EAAC;IACjD,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,+QAAQ,EAAC;IACvD,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,+QAAQ,EAAC;IAEnD,IAAA,gRAAS,EAAC;QACN,QAAQ,GAAG,CAAC,kCAAkC;QAE9C,kEAAkE;QAClE,IAAI,aAAa,iBAAiB,aAAa,mBAAmB;YAC9D,QAAQ,GAAG,CAAC;YACZ,gBAAgB,aAAa;YAC7B,mBAAmB,aAAa;YAChC,iBAAiB;YACjB;QACJ;QAEA,wCAAwC;QACxC,MAAM,iBAAiB,eAAe,OAAO,CAAC;QAC9C,IAAI,gBAAgB;YAChB,QAAQ,GAAG,CAAC;YACZ,eAAe,UAAU,CAAC;YAC1B,iBAAiB;YACjB;QACJ;QAEA,sCAAsC;QACtC,MAAM,iBAAiB,aAAa,OAAO,CAAC;QAC5C,MAAM,qBAAqB,aAAa,OAAO,CAAC;QAEhD,QAAQ,GAAG,CAAC,4BAA4B,gBAAgB,aAAa;QAErE,8CAA8C;QAC9C,IAAI,CAAC,gBAAgB;YACjB,QAAQ,GAAG,CAAC;YACZ,mBAAmB;YACnB,OAAO,OAAO,CAAC;QACnB,OAEK,IAAI,CAAC,oBAAoB;YAC1B,QAAQ,GAAG,CAAC;YACZ,gBAAgB;YAChB,OAAO,OAAO,CAAC;QACnB,OAAO;YACH,QAAQ,GAAG,CAAC;YACZ,gBAAgB;YAChB,mBAAmB;QACvB;QAEA,iBAAiB;IACrB,GAAG;QAAC;QAAU;KAAO;IAErB,kDAAkD;IAClD,IAAI,CAAC,eAAe;QAChB,qBACI,4SAAC;YAAI,WAAU;sBACX,cAAA,4SAAC;gBAAI,WAAU;;;;;;;;;;;IAG3B;IAEA,qBACI,4SAAC,yMAAc;kBACX,cAAA,4SAAC;YAAI,WAAU;;8BAEX,4SAAC,qMAAQ;;;;;8BAGT,4SAAC;oBAAI,WAAU;8BAEV,AAAC,gBAAgB,kBACd,yBAEA,4SAAC,qMAAQ;kCAAE;;;;;;;;;;;;;;;;;;;;;;AAMnC"}}]
}